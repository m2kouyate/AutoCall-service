# AutoCall-service
Этот проект представляет собой бэкенд сервиса, который осуществляет автоматический дозвон до 
загружаемой пользователем базы абонентов и воспроизводит при дозвоне загруженный звуковой файл.

## Основные функции
Аутентификация OAuth 2.0 с идентификацией по логину/паролю.
Авторизация запроса токеном в заголовке.
RESTful API + Swagger для тестирования.
Возможность загрузки звуковых файлов и базы абонентов.
Настройка подключения к поставщику телефонии с использованием SIP.
Реализация телефонного дозвона без привлечения сторонних сервисов.

## Установка
Клонируйте репозиторий с помощью команды `git clone <URL репозитория>`.
Перейдите в директорию проекта с помощью команды `cd <название проекта>`.
Создайте виртуальное окружение с помощью команды `python -m venv venv`.
Активируйте виртуальное окружение с помощью команды `source venv/bin/activate` (Linux/macOS) или `venv\Scripts\activate` (Windows).
Установите зависимости с помощью команды `pip install -r requirements.txt`.

## Запуск
Перейдите в директорию проекта и активируйте виртуальное окружение (см. выше).
Запустите команду `python manage.py createsuperuser` и следуйте инструкциям на экране для создания нового суперпользователя.
Запустите сервер разработки с помощью команды `python manage.py runsslserver --certificate cert.pem --key key.pem`.
Откройте браузер и перейдите по адресу `https://localhost:8000` для доступа к приложению.

## Создание приложения OAuth 2.0
Чтобы создать приложение OAuth 2.0 с типом предоставления “Authorization code” и указанными параметрами, выполните следующие шаги:
Откройте панель администратора Django, перейдя по адресу https://localhost:8000/admin/.
Войдите в систему с помощью своего логина и пароля администратора.
Перейдите на страницу создания нового приложения OAuth 2.0, нажав на ссылку “Add” рядом с заголовком “Applications” в разделе “OAUTH TOOLKIT”.
Заполните необходимые поля формы:
Введите название приложения в поле “Name”.
Выберите тип клиента “Confidential” в поле “Client type”.
Выберите тип предоставления “Authorization code” в поле “Authorization grant type”.
Введите `https://127.0.0.1:8000/web/authorize` в поле “Redirect uris”.
Выберите алгоритм “RSA with SHA-2 256” в поле “Algorithm”.
Скопируйте значения полей “Client id” и “Client secret” перед сохранением для использования в дальнейшем.
Нажмите на кнопку “Save” для сохранения нового приложения.
Теперь вы можете использовать созданное приложение для аутентификации пользователей с помощью протокола OAuth 2.0 и типа предоставления “Authorization code”.

## Получение токена аутентификации OAuth 2.0
Чтобы получить токен аутентификации OAuth 2.0 с использованием типа предоставления “Authorization code”, выполните следующие шаги:
Откройте браузер и перейдите по адресу `https://localhost:8000/o/authorize/?response_type=code&client_id=<скопированный client id>&redirect_uri=https://127.0.0.1:8000/web/authorize`.
Введите свой логин и пароль и нажмите на кнопку “Авторизовать”.
Вы будете перенаправлены на страницу https://127.0.0.1:8000/web/authorize?code=<код авторизации>. Скопируйте значение параметра code из адресной строки.
Отправьте POST-запрос на адрес `https://localhost:8000/o/token/` с параметрами grant_type=authorization_code, code=<скопированный код авторизации>, client_id=<скопированный client id>, client_secret=<скопированный client secret> и redirect_uri=https://127.0.0.1:8000/web/authorize.
В ответе вы получите JSON-объект с токеном доступа, который вы можете использовать для аутентификации запросов к API.
